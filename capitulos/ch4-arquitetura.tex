
\chapter{Arquitetura de Software}
\label{sec-arquitetura}
\vspace{-1cm}

A Figura~\ref{figura-arquitetura} mostra a arquitetura do sistema \emph{\imprimirtitulo}.

\begin{figure}[h]
	\centering
	\includegraphics[width=0.5\textwidth,height=0.6\textheight]{figuras/figura-arquitetura.jpg}
	\caption{Arquitetura do sistema.}
	\label{figura-arquitetura}
\end{figure}

\vspace{0.5cm}

A arquitetura do sistema \emph{\imprimirtitulo} é baseada na Arquitetura em Camadas~\cite{tu2023layered}, adaptando a Arquitetura MVC~\cite{qureshi2014mvc}. Ela é organizada em três camadas.
\alvaro{No projeto inicial de Engenharia de Software 1 (até a v 2.0), havíamos adotado o estilo arquitetônico de partições, mas ao longo do desenvolvimento do projeto, percebemos que a arquitetura em camadas se encaixava melhor nas necessidades do sistema (como a herança entre entidades que antes faziam parte de duas partições diferentes). Portanto, o projeto foi alterado para refletir isso.}

As camadas da arquitetura de cada subsistema são definidas como:
\begin{itemize}
	\item \textbf{Camada de Interface com o Usuário (CIU):} Responsável pela comunicação entre o usuário e o sistema, incluindo telas (views) e controladores (controllers) de interação.
	\item \textbf{Camada de Lógica de Negócio (CLN):} Implementa a lógica de aplicação seguindo o estilo arquitetônico de Camada de Serviços, separando a lógica da aplicação em subpacotes referentes à lógica do negócio (usecases, strategies, mappers).
	\item \textbf{Camada de Domínio do Problema (CDP):} Contém as classes e enums que representam, respectivamente, as entidades e valores do domínio do problema, podendo ser utilizada pela CLN para manipular as entidades do domínio e pela CGD para mapear de entidades do domínio para entidades de modelo de banco de dados.
	\item \textbf{Camada de Gerência de Dados (CGD):} Responsável pela persistência e recuperação de dados, seguindo o padrão Data Access Object (DAO). Essa camada mapeia as entidades do domínio para modelos de banco de dados, o inverso também é realizado para que a CLN possa manipular as entidades do domínio já persistidas.
\end{itemize}

\alvaro{A partir da v 4.0, foi feita a separação da CDP em uma camada à parte, que antes era um componente da CLN. Tal decisão foi tomada de forma a tornar a CDP independente, podendo ser usada pela da CLN e pela CGD.}

A comunicação entre as camadas segue o padrão MVC, onde as páginas do front-end (CIU) chamam os adaptadores responsáveis pelas respostas via protocolo RESTful no back-end, acionando as classes controladoras (CIU), que interagem com as classes da camada de lógica de negócios (CLN) que, por sua vez, manipula as classes do domínio do problema (CDP) e se comunica com a camada de gerência de dados (CGD), a fim de persistir os registros da aplicação.

\vspace{0.5cm}
